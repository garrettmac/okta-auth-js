{"version":3,"sources":["../../../../lib/oidc/util/oauth.ts"],"names":["generateState","generateNonce","getOAuthUrls","sdk","options","arguments","length","AuthSdkError","authorizeUrl","issuer","userinfoUrl","tokenUrl","logoutUrl","revokeUrl","baseUrl","indexOf"],"mappings":";;;;;;;;AAaA;;AACA;;AAdA;;;;;;;;;;;;;AAYA;AAKO,SAASA,aAAT,GAAyB;AAC9B,SAAO,2BAAgB,EAAhB,CAAP;AACD;;AAEM,SAASC,aAAT,GAAyB;AAC9B,SAAO,2BAAgB,EAAhB,CAAP;AACD;;AAEM,SAASC,YAAT,CAAsBC,GAAtB,EAAqCC,OAArC,EAA2D;AAChE,MAAIC,SAAS,CAACC,MAAV,GAAmB,CAAvB,EAA0B;AACxB,UAAM,IAAIC,qBAAJ,CAAiB,sEAAjB,CAAN;AACD;;AACDH,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB,CAJgE,CAMhE;;AACA,MAAII,YAAY,GAAG,+BAAoBJ,OAAO,CAACI,YAA5B,KAA6CL,GAAG,CAACC,OAAJ,CAAYI,YAA5E;AACA,MAAIC,MAAM,GAAG,+BAAoBL,OAAO,CAACK,MAA5B,KAAuCN,GAAG,CAACC,OAAJ,CAAYK,MAAhE;AACA,MAAIC,WAAW,GAAG,+BAAoBN,OAAO,CAACM,WAA5B,KAA4CP,GAAG,CAACC,OAAJ,CAAYM,WAA1E;AACA,MAAIC,QAAQ,GAAG,+BAAoBP,OAAO,CAACO,QAA5B,KAAyCR,GAAG,CAACC,OAAJ,CAAYO,QAApE;AACA,MAAIC,SAAS,GAAG,+BAAoBR,OAAO,CAACQ,SAA5B,KAA0CT,GAAG,CAACC,OAAJ,CAAYQ,SAAtE;AACA,MAAIC,SAAS,GAAG,+BAAoBT,OAAO,CAACS,SAA5B,KAA0CV,GAAG,CAACC,OAAJ,CAAYS,SAAtE;AAEA,MAAIC,OAAO,GAAGL,MAAM,CAACM,OAAP,CAAe,SAAf,IAA4B,CAA5B,GAAgCN,MAAhC,GAAyCA,MAAM,GAAG,SAAhE;AAEAD,EAAAA,YAAY,GAAGA,YAAY,IAAIM,OAAO,GAAG,eAAzC;AACAJ,EAAAA,WAAW,GAAGA,WAAW,IAAII,OAAO,GAAG,cAAvC;AACAH,EAAAA,QAAQ,GAAGA,QAAQ,IAAIG,OAAO,GAAG,WAAjC;AACAD,EAAAA,SAAS,GAAGA,SAAS,IAAIC,OAAO,GAAG,YAAnC;AACAF,EAAAA,SAAS,GAAGA,SAAS,IAAIE,OAAO,GAAG,YAAnC;AAEA,SAAO;AACLL,IAAAA,MAAM,EAAEA,MADH;AAELD,IAAAA,YAAY,EAAEA,YAFT;AAGLE,IAAAA,WAAW,EAAEA,WAHR;AAILC,IAAAA,QAAQ,EAAEA,QAJL;AAKLE,IAAAA,SAAS,EAAEA,SALN;AAMLD,IAAAA,SAAS,EAAEA;AANN,GAAP;AAQD","sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* eslint-disable complexity, max-statements */\nimport { genRandomString, removeTrailingSlash } from '../../util';\nimport AuthSdkError from '../../errors/AuthSdkError';\nimport { OktaAuth, CustomUrls } from '../../types';\n\nexport function generateState() {\n  return genRandomString(64);\n}\n\nexport function generateNonce() {\n  return genRandomString(64);\n}\n\nexport function getOAuthUrls(sdk: OktaAuth, options?: CustomUrls) {\n  if (arguments.length > 2) {\n    throw new AuthSdkError('As of version 3.0, \"getOAuthUrls\" takes only a single set of options');\n  }\n  options = options || {};\n\n  // Get user-supplied arguments\n  var authorizeUrl = removeTrailingSlash(options.authorizeUrl) || sdk.options.authorizeUrl;\n  var issuer = removeTrailingSlash(options.issuer) || sdk.options.issuer;\n  var userinfoUrl = removeTrailingSlash(options.userinfoUrl) || sdk.options.userinfoUrl;\n  var tokenUrl = removeTrailingSlash(options.tokenUrl) || sdk.options.tokenUrl;\n  var logoutUrl = removeTrailingSlash(options.logoutUrl) || sdk.options.logoutUrl;\n  var revokeUrl = removeTrailingSlash(options.revokeUrl) || sdk.options.revokeUrl;\n\n  var baseUrl = issuer.indexOf('/oauth2') > 0 ? issuer : issuer + '/oauth2';\n\n  authorizeUrl = authorizeUrl || baseUrl + '/v1/authorize';\n  userinfoUrl = userinfoUrl || baseUrl + '/v1/userinfo';\n  tokenUrl = tokenUrl || baseUrl + '/v1/token';\n  revokeUrl = revokeUrl || baseUrl + '/v1/revoke';\n  logoutUrl = logoutUrl || baseUrl + '/v1/logout';\n\n  return {\n    issuer: issuer,\n    authorizeUrl: authorizeUrl,\n    userinfoUrl: userinfoUrl,\n    tokenUrl: tokenUrl,\n    revokeUrl: revokeUrl,\n    logoutUrl: logoutUrl\n  };\n}\n"],"file":"oauth.js"}